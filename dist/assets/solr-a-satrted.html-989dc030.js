import{_ as o,W as l,X as i,Y as a,Z as s,$ as e,a0 as t,D as p}from"./framework-f64bc974.js";const c={},r=t('<h1 id="solr入门" tabindex="-1"><a class="header-anchor" href="#solr入门" aria-hidden="true">#</a> Solr入门</h1><h2 id="_1-简介" tabindex="-1"><a class="header-anchor" href="#_1-简介" aria-hidden="true">#</a> 1. 简介</h2><p>Solr是基于Lucene全文搜索引擎</p><h2 id="_2-安装" tabindex="-1"><a class="header-anchor" href="#_2-安装" aria-hidden="true">#</a> 2. 安装</h2>',4),u=a("p",null,"下载安装（我下载的是7.7.3版本）",-1),g={href:"https://lucene.apache.org/solr/downloads.html",target:"_blank",rel:"noopener noreferrer"},d=a("blockquote",null,[a("p",null,"下载二进制包（Binary releases） 不要下载源码包（Source release） 否则启动可能遇到问题")],-1),m=a("li",null,[a("p",null,"目录结构"),a("figure",null,[a("img",{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210301153307778.png",alt:"image-20210301153307778",tabindex:"0",loading:"lazy"}),a("figcaption",null,"image-20210301153307778")]),a("ul",null,[a("li",null,"bin： 启动和停止服务器的脚本"),a("li",null,"example：示例"),a("li",null,"server/logs 文件夹： 所有solr 日志都写入该文件夹"),a("li",null,"server/solr 文件夹：包含不同的集合或核心（core/collection）。对于各集合或核心的配置和数据都存储在相应的集合或核心文件夹、")])],-1),h=t(`<h2 id="_3-启动solr" tabindex="-1"><a class="header-anchor" href="#_3-启动solr" aria-hidden="true">#</a> 3. 启动Solr</h2><p>solr 内置 <code>Jetty</code>服务器 ，可以直接启动</p><p>在bin目录下</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>solr start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210301153900527.png" alt="image-20210301153900527" tabindex="0" loading="lazy"><figcaption>image-20210301153900527</figcaption></figure><p>默认端口为8983</p>`,6),b={href:"http://localhost:8983/solr/",target:"_blank",rel:"noopener noreferrer"},k=t(`<figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210301154015030.png" alt="image-20210301154015030" tabindex="0" loading="lazy"><figcaption>image-20210301154015030</figcaption></figure><h2 id="_4-配置solr" tabindex="-1"><a class="header-anchor" href="#_4-配置solr" aria-hidden="true">#</a> 4. 配置Solr</h2><h3 id="_4-1-建立核心-core" tabindex="-1"><a class="header-anchor" href="#_4-1-建立核心-core" aria-hidden="true">#</a> 4.1 建立核心（core）</h3><h4 id="_4-1-1-方式1-命令行建core" tabindex="-1"><a class="header-anchor" href="#_4-1-1-方式1-命令行建core" aria-hidden="true">#</a> 4.1.1 方式1：命令行建core</h4><blockquote><p>核心：独立模式下启动的配置称为核心</p><p>集合：在SolrCloud模式启动的配置称为集合</p></blockquote><p>首先，创建一个核心的索引数据</p><p><code>solr create</code>： <code>-c &lt;name&gt;</code>:要创建的核心或集合的名称（必需）。 <code>-d &lt;confdir&gt;</code>:配置目录，在SolrCloud模式非常有用。 <code>-n &lt;configName&gt;</code>:配置名称。这将默认为核心或集合的名称。 <code>-p &lt;port&gt;</code>:本地Solr的实例的端口发送<code>create</code>命令; 默认脚本试图通过寻找运行Solr的实例来检测端口。 <code>-s &lt;shards&gt;</code>:Number of shards to split a collection into, default is 1. <code>-rf &lt;replicas&gt;</code>:集合中的每个文件的份数。默认值是1。</p><p>使用核心名称<code>-c</code>参数。对于所有其它参数使用默认设置。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>solr create <span class="token parameter variable">-c</span> jcg
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210301155837877.png" alt="image-20210301155837877" tabindex="0" loading="lazy"><figcaption>image-20210301155837877</figcaption></figure><p>JCG核心被填充在核心选择器上。</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210301160034928.png" alt="image-20210301160034928" tabindex="0" loading="lazy"><figcaption>image-20210301160034928</figcaption></figure><h4 id="_4-1-2-方式二-界面操作" tabindex="-1"><a class="header-anchor" href="#_4-1-2-方式二-界面操作" aria-hidden="true">#</a> 4.1.2 方式二：界面操作</h4><ol><li><p>在core admin上点击new core新建</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210304151629768.png" alt="image-20210304151629768" tabindex="0" loading="lazy"><figcaption>image-20210304151629768</figcaption></figure></li><li><p>此时会提示**&#39;solrconfig.xml** 文件找不到</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210304151726594.png" alt="image-20210304151726594" tabindex="0" loading="lazy"><figcaption>image-20210304151726594</figcaption></figure></li><li><p>此时我们去安装目录下，可以看到已经新建了一个core目录。</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210304151943980.png" alt="image-20210304151943980" tabindex="0" loading="lazy"><figcaption>image-20210304151943980</figcaption></figure><ol start="4"><li><p>报错是因为需要的配置文件不存在，我们去拷贝过来即可。</p><p>进入F:\\solr-7.7.3\\server\\solr\\configsets_default 目录下，把conf文件夹copy到</p><p>F:\\solr-7.7.3\\server\\solr\\new_core 目录下，然后再执行Add core。</p><p>然后等待1-2s，会进入以下界面：</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210304152230352.png" alt="image-20210304152230352" tabindex="0" loading="lazy"><figcaption>image-20210304152230352</figcaption></figure></li></ol></li></ol><h3 id="_4-2-修改schema-xml-文件" tabindex="-1"><a class="header-anchor" href="#_4-2-修改schema-xml-文件" aria-hidden="true">#</a> 4.2 修改Schema.xml 文件</h3><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210301160308308.png" alt="image-20210301160308308" tabindex="0" loading="lazy"><figcaption>image-20210301160308308</figcaption></figure><ul><li>conf ： 保存核心配置</li><li>data： 索引数据</li></ul><p>solr-7.7.3\\server\\solr\\jcg\\conf\\managed-schema中添加如下内容：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cat<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text_general<span class="token punctuation">&quot;</span></span> <span class="token attr-name">indexed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stored</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text_general<span class="token punctuation">&quot;</span></span> <span class="token attr-name">indexed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stored</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>double<span class="token punctuation">&quot;</span></span> <span class="token attr-name">indexed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stored</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inStock<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>boolean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">indexed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stored</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>author<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text_general<span class="token punctuation">&quot;</span></span> <span class="token attr-name">indexed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stored</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>indexed</code>: 为<code>true</code>指定字段被索引。</li><li><code>stored</code>指定字段是否被存储。</li></ul><h3 id="_4-3-重启服务器" tabindex="-1"><a class="header-anchor" href="#_4-3-重启服务器" aria-hidden="true">#</a> 4.3 重启服务器</h3><p>修改配置必须重启服务器</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>solr stop <span class="token parameter variable">-all</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>重启服务：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>solr start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_4-4-索引数据" tabindex="-1"><a class="header-anchor" href="#_4-4-索引数据" aria-hidden="true">#</a> 4.4 索引数据</h3><p>Apache Solr自带SimplePostTool的程序。</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210301163115327.png" alt="image-20210301163115327" tabindex="0" loading="lazy"><figcaption>image-20210301163115327</figcaption></figure><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>java <span class="token operator">-</span>jar post<span class="token punctuation">.</span>jar <span class="token operator">-</span>h
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210301163318496.png" alt="image-20210301163318496" tabindex="0" loading="lazy"><figcaption>image-20210301163318496</figcaption></figure><p>索引数据：</p><div class="language-ruby line-numbers-mode" data-ext="rb"><pre class="language-ruby"><code>java <span class="token operator">-</span>Dtype<span class="token operator">=</span>text<span class="token operator">/</span>csv <span class="token operator">-</span>Durl<span class="token operator">=</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8983</span><span class="token operator">/</span>solr<span class="token operator">/</span>jcg<span class="token operator">/</span>update  <span class="token operator">-</span>jar post<span class="token punctuation">.</span>jar   books<span class="token punctuation">.</span>csv
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p>-Dtype</p><p>数据文件的类型。</p></li><li><p>-Durl</p><p>JCG核心的地址。</p></li></ul><p>导航到以下网址并选择核心JCG:</p><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210301163549574.png" alt="image-20210301163549574" tabindex="0" loading="lazy"><figcaption>image-20210301163549574</figcaption></figure><h2 id="_5-搜索" tabindex="-1"><a class="header-anchor" href="#_5-搜索" aria-hidden="true">#</a> 5. 搜索</h2><h3 id="_5-1-按名称搜索" tabindex="-1"><a class="header-anchor" href="#_5-1-按名称搜索" aria-hidden="true">#</a> 5.1 按名称搜索</h3>`,37),f={href:"https://link.jianshu.com/?t=http://localhost:8983/solr/jcg/select?q=name",target:"_blank",rel:"noopener noreferrer"},_=a("figure",null,[a("img",{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210301163908343.png",alt:"image-20210301163908343",tabindex:"0",loading:"lazy"}),a("figcaption",null,"image-20210301163908343")],-1),z=a("h3",{id:"_5-2-首字母搜索",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#_5-2-首字母搜索","aria-hidden":"true"},"#"),s(" 5.2 首字母搜索")],-1),v={href:"https://link.jianshu.com/?t=http://localhost:8983/solr/jcg/select?q=name",target:"_blank",rel:"noopener noreferrer"},q=a("figure",null,[a("img",{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210301164023760.png",alt:"image-20210301164023760",tabindex:"0",loading:"lazy"}),a("figcaption",null,"image-20210301164023760")],-1),x=a("h3",{id:"_5-3-使用通配符",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#_5-3-使用通配符","aria-hidden":"true"},"#"),s(" 5.3 使用通配符")],-1),y={href:"https://link.jianshu.com/?t=http://localhost:8983/solr/jcg/select?q=name",target:"_blank",rel:"noopener noreferrer"},j=a("figure",null,[a("img",{src:"https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210301164102113.png",alt:"image-20210301164102113",tabindex:"0",loading:"lazy"}),a("figcaption",null,"image-20210301164102113")],-1),S=a("h3",{id:"_5-4-使用条件",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#_5-4-使用条件","aria-hidden":"true"},"#"),s(" 5.4 使用条件")],-1),C=a("p",null,"如何查询价格低于￥6的书。",-1),w={href:"http://localhost:8983/solr/jcg/select?q=*&fq=price:",target:"_blank",rel:"noopener noreferrer"},A=t('<figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210301164140115.png" alt="image-20210301164140115" tabindex="0" loading="lazy"><figcaption>image-20210301164140115</figcaption></figure><h2 id="_6-solr-页面进行查询" tabindex="-1"><a class="header-anchor" href="#_6-solr-页面进行查询" aria-hidden="true">#</a> 6. Solr 页面进行查询</h2><figure><img src="https://zszblog.oss-cn-beijing.aliyuncs.com/zszblog/blogimage-master/img/image-20210301164448216.png" alt="image-20210301164448216" tabindex="0" loading="lazy"><figcaption>image-20210301164448216</figcaption></figure><h2 id="参考文章" tabindex="-1"><a class="header-anchor" href="#参考文章" aria-hidden="true">#</a> 参考文章</h2>',4),N={href:"https://www.jianshu.com/p/1b725a783d50",target:"_blank",rel:"noopener noreferrer"};function D(B,J){const n=p("ExternalLinkIcon");return l(),i("div",null,[r,a("ol",null,[a("li",null,[u,a("p",null,[a("a",g,[s("下载solr"),e(n)])]),d]),m]),h,a("p",null,[a("a",b,[s("http://localhost:8983/solr/"),e(n)])]),k,a("p",null,[a("a",f,[s("http://localhost:8983/solr/jcg/select?q=name"),e(n)]),s(':"A Clash of Kings"')]),_,z,a("p",null,[a("a",v,[s("http://localhost:8983/solr/jcg/select?q=name"),e(n)]),s(':"A"')]),q,x,a("p",null,[a("a",y,[s("http://localhost:8983/solr/jcg/select?q=name"),e(n)]),s(':"*of"')]),j,S,C,a("p",null,[a("a",w,[s("http://localhost:8983/solr/jcg/select?q=*&fq=price:"),e(n)]),s("[0 TO 6]")]),A,a("p",null,[a("a",N,[s("Apache Solr入门教程"),e(n)])])])}const E=o(c,[["render",D],["__file","solr-a-satrted.html.vue"]]);export{E as default};
